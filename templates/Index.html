<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sistema de Inventario</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background: #f4f4f4; }
        .form-section { margin-bottom: 20px; }
        .flash { color: red; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ðŸ“¦ Sistema de Inventario</h1>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for msg in messages %}
            <p>{{ msg }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}


    <div class="form-section">
        <h2>Agregar Producto</h2>
        <form action="/add" method="POST">
            <input type="text" name="id" placeholder="ID" required>
            <input type="text" name="nombre" placeholder="Nombre" required>
            <input type="number" step="0.01" name="precio" placeholder="Precio" required>
            <input type="number" name="stock" placeholder="Stock" required>
            <button type="submit">Agregar</button>
        </form>
    </div>

    <h2>Inventario Actual</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>Acciones</th>
        </tr>
        {% for p in inventory %}
        <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.nombre }}</td>
            <td>${{ "%.2f"|format(p.precio) }}</td>
            <td>{{ p.stock }}</td>
            <td>

                <form action="/update/{{ p.id }}" method="POST" style="display:inline;">
                    <input type="number" name="stock" min="0" required>
                    <button type="submit">Actualizar</button>
                </form>

                <a href="/delete/{{ p.id }}" onclick="return confirm('Â¿Eliminar este producto?')">Eliminar</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
